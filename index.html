<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Mükemmel Gününüzü Planlayın</title>
<meta name="description" content="Hızlı anket ve kategoriye özel risk analizi.">
<style>
:root{
  --bg1:#fbfeff; --bg2:#f6fbff; --bg3:#fff8f4;
  --panel:#ffffff; --text:#0f172a; --muted:#6b7280; --line:#e5e7eb;
  --ok:#22c55e; --mid:#eab308; --critical:#ef4444;
  --brand:#22c55e; --brandHover:#16a34a;
  --radius:14px; --btnRadius:999px; --container:940px; --shadow:0 8px 24px #0002;
}
*{box-sizing:border-box}
body{
  margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial; color:var(--text);
  background:
    radial-gradient(1200px 500px at -5% -10%, var(--bg3) 0, transparent 60%),
    radial-gradient(900px 400px at 110% -10%, var(--bg2) 0, transparent 60%),
    linear-gradient(180deg, var(--bg1), #ffffff);
}
.container{max-width:var(--container);margin:0 auto;padding:22px}
h1{margin:0 0 12px;text-align:center}
h2{margin:0 0 10px}
.muted{color:var(--muted)}
.lead{font-size:20px; line-height:1.5}
.panel{background:#fff;border:1px solid var(--line);border-radius:var(--radius);box-shadow:var(--shadow);padding:16px}
img.hero{width:100%;border-radius:var(--radius);margin:8px 0 12px}
.question{margin:18px 0}
.choices{display:grid;grid-template-columns:1fr;gap:8px}
.btn{display:inline-block;width:100%;padding:12px 18px;border:none;border-radius:var(--btnRadius);background:var(--brand);color:#fff;font-weight:700;text-align:center;cursor:pointer;text-decoration:none;margin:6px 0}
.btn:hover{background:var(--brandHover)}
.btn.ghost{background:var(--line);color:var(--text)}
.btn.selected{outline:2px solid #16a34a;background:#16a34a}
.btn-lg{padding:16px 22px; font-size:18px}
.row2{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:6px}
.progress{height:10px;background:var(--line);border-radius:999px;overflow:hidden;margin:16px 0}
.bar{height:100%;width:0;background:linear-gradient(90deg,#22c55e,#86efac)}
#quiz{display:none} #result{display:none}

/* ---- Итоговые индикаторы ---- */
.meters{display:grid;gap:12px;margin:12px 0}
.meter-card{border:1px solid var(--line);border-radius:12px;padding:12px;background:#fff}
.meter-head{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:8px}
.meter-title{font-weight:700}
.meter-badge{font-size:12px;border:1px solid var(--line);border-radius:999px;padding:2px 8px}
.meter{height:12px;background:#f3f4f6;border-radius:999px;overflow:hidden;position:relative}
.meter-fill{height:100%;width:0%;border-radius:999px;transition:width .5s ease}
.meter-note{font-size:12px;color:var(--muted);margin-top:6px}

/* легенда — 3 цвета // CHANGED */
.legend{display:flex;gap:12px;align-items:center;justify-content:center;font-size:12px;color:var(--muted);margin-top:8px}
.dot{width:10px;height:10px;border-radius:50%}

.cta{text-align:center;margin:18px 0;padding:16px;border:1px solid var(--line);border-radius:var(--radius)}
.cta h3.big{font-size:26px;line-height:1.2;font-weight:900;margin:0 0 8px}
.tooltip{position:fixed;pointer-events:none;background:#000;color:#fff;font-size:12px;padding:6px 8px;border-radius:8px;opacity:0;transform:translateY(-6px);transition:.12s;z-index:10}
.note{font-size:12px;color:var(--muted);text-align:center;margin-top:6px}
.badge{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid var(--line);font-size:12px}
.badge.red{background:#fee2e2;color:#991b1b}
.badge.yellow{background:#fef9c3;color:#854d0e}
.badge.green{background:#dcfce7;color:#166534}
.hr{height:1px;background:var(--line);margin:10px 0}
.share-list{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
.share-list a{display:inline-block;padding:8px 12px;border-radius:999px;border:1px solid var(--line);background:#fff;color:#0f172a;text-decoration:none;font-size:14px}
</style>
</head>
<body>
<div class="container">
  <h1>Mükemmel Gününüzü Planlayın</h1>

  <div id="welcome" class="panel">
    <h2>Hoş Geldiniz!</h2>
    <img src="hero.png" alt="Eğitmen" class="hero">
    <p class="muted lead">Kısa sorularla sizin için ideal günlük rutini oluşturalım.</p>

    <button class="btn btn-lg" onclick="startQuiz()">Başla</button>

    <div class="row2">
      <a class="btn ghost" href="https://t.me/health_yasham_bot?start=from_site_home" target="_blank" rel="noopener">Telegram’da kayıt ve ödeme</a>
      <button id="shareBtn" class="btn ghost" type="button">Paylaş</button>
    </div>
    <div id="shareBox" class="share-list" style="display:none"></div>
  </div>

  <div id="progressWrap" style="display:none">
    <div class="progress"><div class="bar" id="bar"></div></div>
    <p class="muted" style="text-align:right;margin:0">İlerleme: <span id="pct">0%</span></p>
  </div>

  <!-- QUIZ -->
  <div id="quiz">
    <div class="question panel" id="q1">
      <h2>Yaşınız nedir?</h2>
      <div class="choices"><button class="btn">18-25</button><button class="btn">26-35</button><button class="btn">36-45</button><button class="btn">46+</button></div>
      <div class="navline"><button class="btn ghost" onclick="prev()">Geri</button></div>
    </div>

    <div class="question panel" id="q2" style="display:none">
      <h2>Cinsiyetiniz nedir?</h2>
      <div class="choices"><button class="btn">Kadın</button><button class="btn">Erkek</button></div>
      <div class="navline"><button class="btn ghost" onclick="prev()">Geri</button></div>
    </div>

    <div class="question panel" id="q3" style="display:none">
      <h2>Uyku saatiniz?</h2>
      <div class="choices"><button class="btn">22:00</button><button class="btn">23:00</button><button class="btn">00:00</button><button class="btn">01:00</button><button class="btn">02:00</button><button class="btn">03:00</button></div>
      <div class="navline"><button class="btn ghost" onclick="prev()">Geri</button></div>
    </div>

    <!-- q4 УДАЛЁН // CHANGED -->

    <div class="question panel" id="q6" style="display:none">
      <h2>Enerji durumunuz?</h2>
      <div class="choices"><button class="btn">Yüksek</button><button class="btn">Orta</button><button class="btn">Düşük</button></div>
      <div class="navline"><button class="btn ghost" onclick="prev()">Geri</button></div>
    </div>

    <!-- q7 УДАЛЁН (Su) // CHANGED -->

    <div class="question panel" id="q8" style="display:none">
      <h2>Hareket düzeyiniz?</h2>
      <div class="choices"><button class="btn">Düşük</button><button class="btn">Orta</button><button class="btn">Yüksek</button></div>
      <div class="navline"><button class="btn ghost" onclick="prev()">Geri</button></div>
    </div>

    <div class="question panel" id="q9" style="display:none">
      <!-- ВМЕСТО Öğün sayınız? // CHANGED -->
      <h2>Gün içinde ara öğün (atıştırma) var mı?</h2>
      <div class="choices"><button class="btn">Evet</button><button class="btn">Hayır</button></div>
      <div class="navline"><button class="btn ghost" onclick="prev()">Geri</button></div>
    </div>

    <!-- q10 УДАЛЁН (Tatlı) // CHANGED -->

    <div class="question panel" id="q11" style="display:none">
      <h2>Stres seviyeniz?</h2>
      <div class="choices"><button class="btn">Düşük</button><button class="btn">Orta</button><button class="btn">Yüksek</button></div>
      <div class="navline"><button class="btn ghost" onclick="prev()">Geri</button></div>
    </div>

    <div class="question panel" id="q12" style="display:none">
      <h2>Ekran süreniz?</h2>
      <!-- ответы переработаны // CHANGED -->
      <div class="choices"><button class="btn">≤4 saat</button><button class="btn">4-6 saat</button><button class="btn">6+ saat</button></div>
      <div class="navline"><button class="btn ghost" onclick="prev()">Geri</button></div>
    </div>

    <div class="question panel" id="q13" style="display:none">
      <h2>Kafein tüketimi?</h2>
      <div class="choices"><button class="btn">Hemen hemen hiç</button><button class="btn">Günde 1-2</button><button class="btn">Günde 3+</button></div>
      <div class="navline"><button class="btn ghost" onclick="prev()">Geri</button></div>
    </div>

    <div class="question panel" id="q14" style="display:none">
      <h2>Hedefiniz nedir?</h2>
      <div class="choices">
        <button class="btn" onclick="finish()">Kilo vermek</button>
        <button class="btn" onclick="finish()">Enerji artırmak</button>
        <button class="btn" onclick="finish()">Odak geliştirmek</button>
        <button class="btn" onclick="finish()">Yukarıdakilerin hepsi</button>
      </div>
      <div class="navline"><button class="btn ghost" onclick="prev()">Geri</button></div>
    </div>
  </div>

  <!-- RESULT -->
  <div id="result" class="panel">
    <h2>Teşekkürler!</h2>
    <p class="muted">Aşağıda kategorilere göre durumunuzu ve kısa önerileri görebilirsiniz.</p>

    <div id="meters" class="meters"></div>
    <!-- легенда на 3 цвета // CHANGED -->
    <div class="legend">
      <span class="dot" style="background:var(--critical)"></span> Kırmızı
      <span class="dot" style="background:var(--mid)"></span> Sarı
      <span class="dot" style="background:var(--ok)"></span> Yeşil
    </div>

    <div id="riskBox" class="panel" style="margin-top:10px"></div>

    <div class="cta">
      <h3 class="big">KENDİNİZİN DAHA İYİ VERSİYONU OLMAK İSTER MİSİNİZ?</h3>
      <h3>SİZİN İÇİN ÖZEL 1 aylık BESLENME PROGRAMINI HAZIRLADIK.</h3>
      <a href="course.html" class="btn ghost" target="_blank" rel="noopener">Programı İncele</a>
    </div>
  </div>
</div>

<div id="tooltip" class="tooltip"></div>

<script>
/* ---- SHARE ---- */
const shareBtn = document.getElementById('shareBtn');
const shareBox = document.getElementById('shareBox');
const shareUrl = location.href.split('#')[0];
const shareText = "30 Günlük Doğru Beslenme Programı — anketi çöz ve kişisel analizi gör!";
function buildShareFallback(){
  shareBox.style.display='flex';
  shareBox.innerHTML = `
    <a href="https://t.me/share/url?url=${encodeURIComponent(shareUrl)}&text=${encodeURIComponent(shareText)}" target="_blank" rel="noopener">Telegram</a>
    <a href="https://wa.me/?text=${encodeURIComponent(shareText+' '+shareUrl)}" target="_blank" rel="noopener">WhatsApp</a>
    <a href="https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}" target="_blank" rel="noopener">X (Twitter)</a>
    <a href="https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}" target="_blank" rel="noopener">Facebook</a>
    <a href="mailto:?subject=${encodeURIComponent('30 Günlük Program')}&body=${encodeURIComponent(shareText+' '+shareUrl)}">E-posta</a>
  `;
}
shareBtn?.addEventListener('click', async ()=>{
  if(navigator.share){
    try{ await navigator.share({title:document.title, text:shareText, url:shareUrl}); }catch(e){}
  }else{ buildShareFallback(); shareBox.scrollIntoView({behavior:'smooth',block:'start'}); }
});

/* ---------- Цвета ---------- */
function getCss(name){return getComputedStyle(document.documentElement).getPropertyValue(name).trim();}
const COLORS = { green:getCss('--ok'), yellow:getCss('--mid'), red:getCss('--critical') };

/* ---------- Границы 3-цветной шкалы (для всех категорий одинаковые) // CHANGED
   value = 0..100, чем больше — тем лучше
   0..49 = красный, 50..79 = жёлтый, 80..100 = зелёный
*/
function bandFor(value){
  if(value < 50) return {band:'red', color:COLORS.red,  label:'kötü'};
  if(value < 80) return {band:'yellow', color:COLORS.yellow, label:'orta'};
  return {band:'green', color:COLORS.green, label:'iyi'};
}

/* ---------- Баллы ответов (все: БОЛЬШЕ = ЛУЧШЕ) // CHANGED ---------- */
const ANSWER_SCORES = {
  // Uyku saati — по твоим описаниям
  q3: {"22:00":100,"23:00":85,"00:00":60,"01:00":40,"02:00":20,"03:00":10},

  // Enerji
  q6: {"Yüksek":90,"Orta":65,"Düşük":40},

  // Hareket
  q8: {"Düşük":35,"Orta":65,"Yüksek":90},

  // Ara öğün (перекусы) — «Hayır» хорошо
  q9: {"Evet":35,"Hayır":85},

  // Stres — «Düşük» хорошо
  q11:{"Düşük":90,"Orta":60,"Yüksek":30},

  // Ekran — новые опции
  q12:{"≤4 saat":85,"4-6 saat":60,"6+ saat":30},

  // Kafein
  q13:{"Hemen hemen hiç":85,"Günde 1-2":70,"Günde 3+":35}
};

/* ---------- Шаги (удалены q4, q7, q10) // CHANGED ---------- */
const steps=["q1","q2","q3","q6","q8","q9","q11","q12","q13","q14"];
let idx=0; const answers={};

function startQuiz(){document.getElementById('welcome').style.display='none';document.getElementById('quiz').style.display='block';document.getElementById('progressWrap').style.display='block';show(idx);}
function show(i){steps.forEach((id,j)=>{const el=document.getElementById(id);if(el)el.style.display=(i===j)?'block':'none';});updateBar();window.scrollTo({top:0,behavior:'smooth'});restoreSelection();}
function updateBar(){const pct=Math.round((idx/steps.length)*100);document.getElementById('bar').style.width=pct+'%';document.getElementById('pct').textContent=pct+'%';}
function prev(){if(idx>0){idx--;show(idx);}}

document.addEventListener('click',e=>{
  if(e.target.matches('.choices .btn') && !e.target.hasAttribute('onclick')){
    const qEl=e.target.closest('.question'); const qid=qEl.id;
    answers[qid]=e.target.innerText.trim();
    qEl.querySelectorAll('.choices .btn').forEach(b=>b.classList.remove('selected'));
    e.target.classList.add('selected');
    idx=Math.min(idx+1, steps.length-1); show(idx);
  }
});
function restoreSelection(){
  const qid=steps[idx], val=answers[qid], qEl=document.getElementById(qid);
  if(!qEl) return;
  qEl.querySelectorAll('.choices .btn').forEach(b=>{b.classList.toggle('selected', b.innerText.trim()===val);});
}
function finish(){const qEl=document.getElementById(steps[idx]);answers[qEl.id]=event.target.innerText.trim();showResult();}

/* ---------- Счёт категорий (все — «чем больше, тем лучше») // CHANGED ---------- */
function scoreFromAnswers(){
  const s={ Uyku:50, Enerji:50, Hareket:50, AraÖğün:50, Stres:50, Ekran:50, Kafein:50 };

  if(answers.q3) s.Uyku   = ANSWER_SCORES.q3[answers.q3] ?? s.Uyku;
  if(answers.q6) s.Enerji = ANSWER_SCORES.q6[answers.q6] ?? s.Enerji;
  if(answers.q8) s.Hareket= ANSWER_SCORES.q8[answers.q8] ?? s.Hareket;
  if(answers.q9) s.AraÖğün= ANSWER_SCORES.q9[answers.q9] ?? s.AraÖğün;
  if(answers.q11) s.Stres = ANSWER_SCORES.q11[answers.q11] ?? s.Stres;
  if(answers.q12) s.Ekran = ANSWER_SCORES.q12[answers.q12] ?? s.Ekran;
  if(answers.q13) s.Kafein= ANSWER_SCORES.q13[answers.q13] ?? s.Kafein;

  // Небольшие зависимости от стресса (по твоим пояснениям) // CHANGED
  if(s.Stres <= 60){ // Orta/Yüksek: ухудшаем «косвенные»
    if(answers.q12 === "≤4 saat") s.Ekran = Math.min(s.Ekran, 70); // несмотря на мало экрана — хронический стресс
    if(answers.q13 !== "Günde 3+") s.Kafein = Math.min(s.Kafein, 70); // мало кофе, но стресс есть
  }

  return s;
}

/* ---- Индикаторы ---- */
function renderMeters(scores){
  const container = document.getElementById('meters');
  container.innerHTML = '';
  const keys = ["Uyku","Enerji","Hareket","AraÖğün","Stres","Ekran","Kafein"]; // CHANGED

  keys.forEach(k=>{
    const val = Math.max(0, Math.min(100, scores[k] ?? 0));
    const {band, color, label} = bandFor(val);

    const card = document.createElement('div');
    card.className = 'meter-card';

    const head = document.createElement('div');
    head.className = 'meter-head';

    const title = document.createElement('div');
    title.className = 'meter-title';
    title.textContent = k;

    const badge = document.createElement('div');
    badge.className = 'meter-badge';
    badge.textContent = `${label.toUpperCase()} • ${val}`;

    head.appendChild(title);
    head.appendChild(badge);

    const meter = document.createElement('div');
    meter.className = 'meter';

    const fill = document.createElement('div');
    fill.className = 'meter-fill';
    fill.style.background = color;
    requestAnimationFrame(()=>{ fill.style.width = val + '%'; });

    meter.appendChild(fill);

    card.appendChild(head);
    card.appendChild(meter);
    container.appendChild(card);
  });
}

/* ---------- Тексты анализа (переписаны под твои объяснения) // CHANGED ---------- */
const TEXTS = {
  Uyku: {
    red:    "Gece geç yatış; kortizol yüksek, büyüme hormonu ve hipofiz ekseni olumsuz etkilenebilir. 22:00–23:00 hedefleyin.",
    yellow: "Saat geçe kayıyor. 23:00’e çekmek, mavi ışığı azaltmak ve ritmi sabitlemek iyi olur.",
    green:  "22:00–23:00 aralığı harika; sinir sistemi için koruyucu. Böyle sürdürün."
  },
  Enerji: {
    red:    "Düşük enerji — karaciğer yükü ve böbrek zayıflığı olası. Hafif yürüyüş ve temel destekleri planlayın.",
    yellow: "Orta enerji — vitamin/mineral eksikleri olası. Düzen, uyku ve besin yoğunluğu önemli.",
    green:  "Yüksek enerji — genel iyilik hâli iyi. Mevcut düzeni koruyun."
  },
  Hareket: {
    red:    "Düşük aktivite; damar içi pıhtı, karaciğer yağlanması, visseral yağ ve eklem sorunları riski.",
    yellow: "Orta; selülit ve kas zayıflıkları görülebilir. Kuvvet + mobilite ekleyin.",
    green:  "Yüksek; boşaltım sistemleri ve genel metabolizma daha verimli çalışır."
  },
  AraÖğün: {
    red:    "Gün içinde sık atıştırma; insülin direnci, Tip 2 diyabet riski, gaz/şişkinlik ve gece tuvalete kalkma görülebilir.",
    yellow: "Bazen atıştırma; sindirim dalgalanabilir. Öğün bütünlüğünü artırın.",
    green:  "Ara öğün yok; sindirim daha sakin, şişkinlik riski düşük."
  },
  Stres: {
    red:    "Yüksek stres; kortizol artışı, adrenal yorgunluk, kabızlık, uyku ve tiroid sorunları görülebilir.",
    yellow: "Orta stres; GİS şikâyetleri, safra stazı ve uyku bozulmaları gelişebilir.",
    green:  "Düşük stres; otonom sinir sistemi dengeli. Organ durumu iyi olsa da düzeni sürdürmek gerek."
  },
  Ekran: {
    red:    "6+ saat: GİS ve eklem sorunları, boyun kas spazmı ve uyku bozulması riski.",
    yellow: "4–6 saat: Bazı kas zayıflıkları ve servikal spazm görülebilir.",
    green:  "≤4 saat: Genel olarak iyi; ancak stres yüksekse kronik yük devam eder."
  },
  Kafein: {
    red:    "Günde 3+: Belirgin kronik stres, mineral eksikliği, zayıf adrenaller ve kötü uyku olası.",
    yellow: "Günde 1–2: Çoğu için tolere edilebilir; stres yüksekse kronik yük devam eder.",
    green:  "Neredeyse hiç: Genel olarak iyi; stres yüksekse kronik yük yine sürebilir."
  }
};

/* контекстные ремарки к Ekran/Kafein при высоком стрессе // CHANGED */
function withStressNotes(key, baseText, scores, answers){
  const stress = answers.q11;
  if((key==="Ekran" || key==="Kafein") && (stress==="Orta" || stress==="Yüksek")){
    return baseText + " <br><em>Not:</em> Stres seviyeniz " + stress + " olduğu için kronik stres yükü devam ediyor.";
  }
  return baseText;
}

function textFor(key, value){
  const {band,label} = bandFor(value);
  const cls = band==='red'?'red':band==='yellow'?'yellow':'green';
  let t = TEXTS[key][band];
  t = withStressNotes(key, t, scoreFromAnswers(), answers);
  return `
    <div class="item">
      <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
        <strong>${key}</strong>
        <span class="badge ${cls}">${label.toUpperCase()}</span>
        <span class="muted">(${value})</span>
      </div>
      <div class="hr"></div>
      <p>${t}</p>
    </div>`;
}

function riskAnalysisDetailed(scores){
  const keys=["Uyku","Enerji","Hareket","AraÖğün","Stres","Ekran","Kafein"];
  const blocks = keys.map(k => textFor(k, scores[k]??0)).join('<div style="height:8px"></div>');
  const cta = `<div class="hr"></div>
    <p>Yukarıdaki maddelere göre size özel plan aşamalı ve sürdürülebilir değişim önerir.</p>`;
  return "<h3 style='margin:0 0 6px'>Risk Analizi (Kategori Bazında)</h3>" + blocks + cta;
}

/* ---------- Итог ---------- */
function showResult(){
  document.getElementById('quiz').style.display='none';
  document.getElementById('progressWrap').style.display='none';
  document.getElementById('result').style.display='block';

  const scores=scoreFromAnswers();
  renderMeters(scores);
  document.getElementById('riskBox').innerHTML = riskAnalysisDetailed(scores);
  window.scrollTo({top:0,behavior:'smooth'});
}
</script>

<!-- Короткий дисклеймер — информационные цели -->
<div class="note">Bu içerik yalnızca bilgilendirme amaçlıdır ve tıbbi tavsiye değildir.</div>
</body>
</html>
